# ライブ表示タブのヘッダー配置乱れの修正

## 不具合・エラーの概要
- 会議記録中にライブ表示タブを開くとヘッダーの配置が乱れる
- 記録中でない時から体裁が変わってしまっている
- ヘッダー及びその内部要素のサイズや配置が変わらないようにする必要がある

## STEP0: ゴール地点の確認
- ヘッダーのサイズと配置を記録中でも非記録中でも同一に保つ
- ヘッダー内部要素の配置も変更されないようにする
- 動的なコンテンツ追加時もレイアウトシフトを防ぐ

## STEP1: 不具合発生箇所の調査

### 調査結果
- LiveMinutesPanel/index.tsx の238-277行目にヘッダー実装を確認
- 241-254行目で条件付きレンダリング: `isRecording && autoUpdateInterval > 0 && nextUpdateTime`
- 記録中のみ「自動更新中...」や「次回更新: X秒後」が表示される
- この動的な要素の追加により、ヘッダー内部の配置が変化している

## STEP2: 原因の調査

### 考察した原因
- 条件付きレンダリングにより、記録中のみ表示される要素がある
- この要素の追加・削除によりヘッダー内のレイアウトが変化
- flexレイアウトの`gap-3`により、要素の追加時に間隔も追加される
- 要素の高さやフォントサイズの違いによる影響も考えられる

### 確実な原因
- LiveMinutesPanel:241-254行目の条件付きレンダリングされる自動更新情報が、記録中のみ表示されることでヘッダーの配置が変化している

## STEP3: 修正案の検討

### 修正方針
1. 自動更新情報の表示領域を常に確保し、非表示時は`visibility: hidden`や`opacity: 0`で見えなくする
2. または、自動更新情報をヘッダー外（別の位置）に配置する
3. flexレイアウトの`min-width`や`flex-shrink`を使用してレイアウトを固定する

### 選択した方針
- 方針1を採用：自動更新情報の表示領域を常に確保し、条件に応じて表示/非表示を切り替える
- この方法により、レイアウトシフトを防ぎつつ、必要な情報は適切に表示できる
- 要件を満たし、他への影響も最小限

## STEP4: 修正案の実装

### 実際に修正した内容
- LiveMinutesPanel/index.tsx の241-258行目を修正
- 自動更新情報のdiv要素を常に表示領域として確保
- `visibility`スタイルを使用して条件に応じて表示/非表示を切り替え
- `minWidth: '150px'`を設定してレイアウトシフトを防ぐ
- `nextUpdateTime`のnullチェックを追加して安全性を向上

### 修正内容と修正箇所
- **ファイル**: src/components/LiveMinutesPanel/index.tsx
- **行番号**: 241-258
- **修正内容**: 
  - 条件付きレンダリングを削除し、常に要素を配置
  - `visibility`スタイルで表示制御
  - 最小幅150pxを確保
- **理由**: ヘッダーのレイアウトを記録中でも非記録中でも同一に保つため