# ヘッダー表示体裁崩れ不具合修正レポート

## 不具合・エラーの概要
ライブ会議中（記録中）かつ、議事録生成ボタンを一回でも押した際に、ヘッダーの表示体裁が崩れる。

## 発生条件
1. ライブ会議中（記録中）の状態
2. 議事録生成ボタンを押す
3. ヘッダーの表示体裁が崩れる

## 過去の類似報告
- 2025-07-15-header-and-button-bugs.md: リサーチタブの見出し重複表示
- 2025-07-19-header-multiline-fix.md: ヘッダーが複数行になる問題（flexboxの折り返し）
- 2025-07-19-live-display-header-layout.md: 条件付きレンダリングによるレイアウトシフト

## STEP1. 不具合発生箇所の調査
LiveMinutesPanel/index.tsx（行238-260）のヘッダー部分を確認：
- 記録中の自動更新情報が条件付きで表示される（行241-258）
- visibilityスタイルで表示/非表示を制御
- minWidth: '150px'を設定してレイアウトシフトを防ぐ

## 考察した原因
議事録生成ボタンを押すと以下の状態変化が発生する可能性：
1. isGenerating状態がtrueになる
2. 更新ボタンが「更新中...」に変わり、幅が変化する可能性
3. ヘッダー内の要素の配置が変わる

## STEP2. 原因の調査

### 確認した内容
1. LiveMinutesPanel/index.tsx（行260-280）の更新ボタン実装
   - 通常時: "🔄 更新"（短いテキスト）
   - isGenerating=true時: "更新中..."（スピナー付きで幅が広い）

2. ヘッダー構造（行238）
   - `flex flex-nowrap`で折り返し防止
   - `h-16 min-h-[64px] max-h-[64px]`で高さ固定
   - `overflow-hidden`でオーバーフロー対策

### 実際に修正した原因
更新ボタンの幅が動的に変化することで、ヘッダー内の要素配置が崩れる。特に：
1. 通常時と生成中でボタンの幅が大きく変わる
2. flexコンテナ内で幅の変化により他要素が圧迫される
3. 自動更新情報の表示領域（minWidth: '150px'）と更新ボタンの幅変化が競合する可能性

## STEP3. 修正案の検討

### 修正方針
1. 更新ボタンの幅を固定する（minWidthを設定）
2. ボタンのテキスト変化時もレイアウトが崩れないようにする
3. 過去の修正（visibility制御、minWidth設定）と整合性を保つ

### 要件確認
- ✓ 解消可能性が高い：ボタンの幅固定で解決
- ✓ 仕様通りの動作：機能に影響なし
- ✓ 他への影響なし：ボタンの見た目のみ変更
- ✓ 実装可能：CSSの調整のみ

## STEP4. 修正案の実装

### 修正内容と修正箇所

1. **LiveMinutesPanel/index.tsx**（行260-280）
   - 更新ボタンに`style={{ minWidth: '100px' }}`を追加
   - ボタン内のコンテンツに`justify-center`を追加して中央揃え
   - 通常時のテキストも`<span>`でラップしてflexコンテナ化

### 修正のポイント
- ボタンの最小幅を100pxに固定することで、テキストが変わってもレイアウトが崩れない
- justify-centerでボタン内のコンテンツを中央揃えにし、統一感を出す
- 自動更新情報のminWidth: '150px'と合わせて、ヘッダー全体の幅が安定する

## 今後の課題
- LiveNextStepsPanelにも同様のボタンがある場合は同様の修正が必要
- 他のパネルでも動的に幅が変わる要素があれば確認が必要