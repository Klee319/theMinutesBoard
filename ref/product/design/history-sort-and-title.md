# プロダクト仕様書: 履歴表示の改善機能

**バージョン**: 1.0
**最終更新日**: 2025-01-15

## 1. 目的とスコープ
- **解決する課題**: theMinutesBoardの履歴表示において、会議が古い順に並んでおり最新の会議を見つけにくい。また、一部の会議でタイトルが表示されず見た目が不揃いになっている。
- **ターゲットユーザー**: theMinutesBoardを使用して会議の議事録を管理するビジネスユーザー。
- **この仕様書の読者**: 開発者、QAエンジニア、プロダクトマネージャー。

## 2. 機能一覧
- `F-01`: 履歴の新しい順ソート機能 — 会議履歴を新しい順（降順）で表示する
- `F-02`: サイドバータイトル必須表示機能 — すべての会議にタイトルを表示し、体裁を統一する

## 3. 機能詳細
### F-01: 履歴の新しい順ソート機能
| 区分 | 名称/説明 | 型/制約/フォーマット | 備考 |
|:---|:---|:---|:---|
| **入力** | 会議リスト | Meeting[] | 終了時刻（endTime）が設定されている会議のみ対象 |
| **処理** | ソート処理 | 会議の開始時刻（startTime）または終了時刻（endTime）を基準に降順ソート | |
| **出力 (正常時)** | ソート済みリスト | 新しい会議が上部に表示される | |
| **出力 (異常時)** | デフォルト順 | 日時情報が不正な場合は元の順序を維持 | |

### F-02: サイドバータイトル必須表示機能
| 区分 | 名称/説明 | 型/制約/フォーマット | 備考 |
|:---|:---|:---|:---|
| **入力** | 会議オブジェクト | Meeting | 議事録の有無に関わらず処理 |
| **処理** | タイトル決定ロジック | 1. 議事録がある場合：extractMeetingTopic()の結果<br>2. 議事録がない場合：「会議 YYYY/MM/DD HH:MM」形式 | |
| **出力 (正常時)** | タイトル文字列 | 文字列 / 最大50文字 / 省略時は「...」を付加 | 必ず何らかのタイトルを表示 |
| **出力 (異常時)** | デフォルトタイトル | 「会議」 + 日時情報、または「無題の会議」 | |

## 4. ビジネスルール
- **ソート基準**: 会議のendTimeを優先的に使用し、存在しない場合はstartTimeを使用する
- **タイトル優先順位**: 
  1. 議事録から抽出した会議の主題（extractMeetingTopic）
  2. デフォルトフォーマット「会議 YYYY/MM/DD HH:MM」
  3. フォールバック「無題の会議」
- **表示制限**: サイドバーのタイトルは最大50文字で、超過分は「...」で省略

## 5. 設定ファイル・環境変数
| 項目名 | デフォルト値 | 必須 | 説明 |
|:---|:---:|:---:|:---|
| - | - | - | この機能に特有の設定項目はありません |

## 6. 非機能要件
| 項目 | 要求レベル | 備考 |
|:---|:---|:---|
| **パフォーマンス** | 1000件の履歴でもソート処理は100ms以内 | |
| **互換性** | 既存の会議データ構造を変更しない | |
| **UI一貫性** | すべての会議項目の高さが統一される | |

## 7. 用語集
- **会議履歴**: endTimeが設定されている（終了済み）会議の一覧
- **extractMeetingTopic**: 議事録の内容から会議の主題を抽出する既存の関数
- **サイドバー**: 履歴表示画面の左側に表示される会議一覧エリア

## 8. 外部依存
- なし（既存のコンポーネントとユーティリティ関数のみを使用）

## 9. 改訂履歴
| 版 | 日付 | 変更内容 | 担当者 |
|:---|:---|:---|:---|
| 1.0 | 2025-01-15 | 初版作成 | ユーザー |