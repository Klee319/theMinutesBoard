# theMinutesBoard 仕様変更書 v2.0

## 変更概要
本ドキュメントは、theMinutesBoard v1.0.0 からの仕様変更内容を記載します。
主な変更点は、既存バグの修正と、会議ファシリテーション機能の大幅な強化です。

## 1. バグ修正に関する仕様変更

### 1.1 参加者本人の記録機能
**変更前**: 「あなた」と表示される発言が議事録に記録されない
**変更後**: 
- 拡張機能利用者の名前を自動取得し、「あなた」を実際の名前に置換
- 設定画面で手動での名前設定も可能
- Chrome Identity APIまたはGoogle Meetのプロフィール情報から自動取得

### 1.2 記録状態の永続化
**変更前**: ページリロードで記録状態が失われる
**変更後**: 
- Chrome Storage APIを使用して記録状態を永続化
- タブIDベースの状態管理により、複数タブでの同時利用に対応
- 自動復元機能により、意図しない中断からの迅速な復旧

### 1.3 停止ボタンの動作
**変更前**: 停止ボタンが正常に機能しない
**変更後**: 
- 状態の同期的更新による確実な停止処理
- ボタンの二重クリック防止機能
- 視覚的フィードバックの改善

### 1.4 議事録更新の継続処理
**変更前**: 一度しか更新できない、生成中表示が残る
**変更後**: 
- API呼び出しの状態管理を改善
- エラー時の自動リトライ機能（最大3回）
- 生成中/完了/エラーの状態を明確に表示

### 1.5 APIキー設定の永続化
**変更前**: 設定したAPIキーが保存されない
**変更後**: 
- Chrome Sync Storageによるデバイス間同期
- Web Crypto APIによる暗号化保存
- 設定確認画面の追加

### 1.6 時刻情報の自動記録
**新規追加**: 
- 会議開始・終了時刻の自動記録
- 経過時間のリアルタイム表示
- タイムゾーン対応（ユーザーのローカルタイム）
- 議事録への時刻情報自動埋め込み

## 2. 新機能仕様

### 2.1 レスポンシブデザイン
**対応デバイス**:
- スマートフォン: 320px～767px
- タブレット: 768px～1023px
- デスクトップ: 1024px以上

**レスポンシブ動作**:
- モバイル: シングルカラム表示、スワイプでパネル切り替え
- タブレット: 2カラム表示オプション
- デスクトップ: 3カラム表示（デフォルト）

### 2.2 AIチャット機能
**機能概要**:
会議中の会話をリアルタイムでAIが分析し、インタラクティブな支援を提供

**主要機能**:
1. **リアルタイム質問応答**
   - 会議内容に関する質問への即座の回答
   - 過去の議事録を参照した回答生成

2. **議事録編集支援**
   - 自然言語での編集指示
   - 例: "先ほどの決定事項を箇条書きにして"

3. **情報検索機能**
   - 過去の会議からの関連情報検索
   - キーワードベースの横断検索

4. **コンテキスト管理**
   - 現在の会議内容を常にコンテキストとして保持
   - 過去5件までの関連会議を自動的に参照

### 2.3 3カラムレイアウト
**レイアウト構成**:
```
┌────────────┬────────────┬────────────┐
│ネクスト     │  議事録     │ AIチャット  │
│ステップ     │            │            │
│            │            │            │
│・未確定項目 │・会議内容   │・質問入力   │
│ （赤字）    │・決定事項   │・AI応答    │
│・ToDo一覧   │・アクション │・検索結果   │
│            │            │            │
└────────────┴────────────┴────────────┘
```

**機能詳細**:
- 各カラムは独立してON/OFF可能
- ドラッグ＆ドロップでカラム幅調整
- カラムの順序変更可能
- フルスクリーンモード対応

### 2.4 ネクストステップ管理機能
**概要**:
会議の進行状況を可視化し、決定事項と未決定事項を明確に管理

**主要機能**:
1. **自動抽出**
   - AIが会議内容からタスクを自動抽出
   - 決定/未決定の自動判定

2. **タスク管理**
   - 担当者の割り当て
   - 期限の設定
   - 優先度の設定
   - 進捗ステータス管理

3. **視覚的表現**
   - 未確定項目は赤字で表示
   - 完了項目はグレーアウト
   - 期限切れ項目は警告表示

4. **プロンプトカスタマイズ**
   - システムプロンプトファイル対応
   - ユーザープロンプト入力欄
   - テンプレート機能

## 3. プロダクトビジョンの実現

### 3.1 会議ファシリテーション機能
**AIエージェントとしての役割**:
- 議題の進行状況をリアルタイム監視
- 停滞している議題への介入提案
- 関連する過去の決定事項の自動提示
- 次のアクションの提案

### 3.2 依存性の構築（スイッチングコスト）
- 過去の議事録データベースの蓄積
- カスタマイズされたプロンプトとワークフロー
- チーム固有の用語辞書の学習
- 他ツールへのエクスポート機能の制限

### 3.3 会議効率化の実現
**測定可能な改善指標**:
- 平均会議時間の短縮率
- 決定事項数/会議の増加
- フォローアップタスクの完了率
- 参加者満足度スコア

## 4. データモデルの拡張

### 4.1 新規追加フィールド
```typescript
// Meeting型の拡張
interface Meeting {
  // 既存フィールド...
  
  // 新規追加
  facilitationData: {
    totalDuration: number;
    activeDiscussionTime: number;
    decisionCount: number;
    pendingTopics: string[];
  };
  
  relatedMeetings: string[]; // 関連する過去の会議ID
  tags: string[]; // 検索用タグ
}

// NextStep型（新規）
interface NextStep {
  id: string;
  meetingId: string;
  task: string;
  assignee?: string;
  dueDate?: Date;
  status: 'pending' | 'confirmed' | 'in_progress' | 'completed';
  isPending: boolean;
  dependencies: string[]; // 他のタスクID
  notes: string;
  createdAt: Date;
  updatedAt: Date;
}

// ChatSession型（新規）
interface ChatSession {
  id: string;
  meetingId: string;
  messages: ChatMessage[];
  context: {
    currentTranscripts: Transcript[];
    relatedMinutes: Minutes[];
    activeTopics: string[];
  };
}
```

## 5. UI/UX改善仕様

### 5.1 ユーザビリティ向上
- オンボーディングツアーの実装
- ツールチップによる機能説明
- キーボードショートカット対応
- ダークモード対応

### 5.2 アクセシビリティ
- WCAG 2.1 AA準拠
- スクリーンリーダー対応
- キーボードナビゲーション完全対応
- 高コントラストモード

## 6. パフォーマンス要件

### 6.1 レスポンスタイム
- 字幕取得: < 100ms
- 議事録生成: < 5秒
- AIチャット応答: < 3秒
- UI操作: < 50ms

### 6.2 リソース使用量
- メモリ使用量: < 200MB
- CPU使用率: < 10%（アイドル時）
- ストレージ: < 100MB/月

## 7. セキュリティ強化

### 7.1 データ保護
- エンドツーエンド暗号化オプション
- ローカルファースト設計
- 自動データ削除設定
- 監査ログ機能

### 7.2 プライバシー設定
- 参加者の同意管理
- データ共有範囲の設定
- 匿名化オプション
- GDPRコンプライアンス

---

更新日: 2025年1月6日
バージョン: 2.0.0
初版仕様書（v1.0.0）からの変更